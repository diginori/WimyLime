<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>WimyLime Recorder</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>

    <script src="common.js"></script>
    <script>
    var keytyped = false;
    var keylog = "";
    
    var notePad1 = [];
    var notePad2 = [];
    var notePad3 = [];
    var notePad4 = [];
    
    function getCurrentYoutubeTimeString()
    {
    	if ( g_youtubePlayer == null )
    	{
        	return 0.0;
    	}
    	else
    	{
        	return getFixedYoutubeCurrentTime();
    	}
    }
    
    function onGamePad1()
    {
    	notePad1.push(getCurrentYoutubeTimeString());
    	generateResult();
    }
    
    function onGamePad2()
    {
    	notePad2.push(getCurrentYoutubeTimeString());
    	generateResult();
    }
    
    function onGamePad3()
    {
    	notePad3.push(getCurrentYoutubeTimeString());
    	generateResult();
    }
    
    function onGamePad4()
    {
    	notePad4.push(getCurrentYoutubeTimeString());
    	generateResult();
    }
    
    function makeNote(key, arr)
    {
		var note = key + " : [ ";
		
		for ( var i=0; i<arr.length; ++i )
		{
			if ( i != 0 )
			{
				note += ", ";
			}
			note += arr[i].toString();
		}
		note += "],";
		
		return note;
    }
    
    function generateResult()
    {
    	var logDiv = document.getElementById("result");

    	var keylog = "notes = {";
    	
    	keylog += makeNote("pad1", notePad1);
    	keylog += makeNote("pad2", notePad2);
    	keylog += makeNote("pad3", notePad3);
    	keylog += makeNote("pad4", notePad4);
    	
    	keylog += "}";
    	logDiv.innerHTML = keylog;
    }

    function draw()
    {
    	var canvas = document.getElementById("mycanvas");
    	
    	if ( canvas == null ) return;
    	var context = canvas.getContext("2d");
    	
    	context.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
    	context.fillStyle = "rgb(150,150,150)";
    	
    	if ( keytyped )
    	{
    		context.fillStyle = "rgb(255,255,255)";
    		keytyped = false;
    	}
    	
    	context.fillRect(0,0,CANVAS_WIDTH, CANVAS_HEIGHT);
    }
    
    startMainLoop(draw);
    </script>
    
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script src="recorder.js" type="text/javascript"></script>
  </head>
  <body>
  	<div id="allcontent">
	    <div id="videoDiv">Loading...</div>
	    <br />
	    <canvas id="mycanvas" width="480" height="300"></canvas>
	    <div id="controller">
			<table id="inputTable">
				<tr>
					<td id="inputPad1"></td>
					<td id="inputPad2"></td>
					<td id="inputPad3"></td>
					<td id="inputPad4"></td>
				</tr>
			</table>
		</div>
		<script>
		document.getElementById("inputPad1").addEventListener("touchstart", onTouchPad1, false);
		document.getElementById("inputPad2").addEventListener("touchstart", onTouchPad2, false);
		document.getElementById("inputPad3").addEventListener("touchstart", onTouchPad3, false);
		document.getElementById("inputPad4").addEventListener("touchstart", onTouchPad4, false);
		
		document.getElementById("inputPad1").addEventListener("touchend", onTouchPadEnd1, false);
		document.getElementById("inputPad2").addEventListener("touchend", onTouchPadEnd2, false);
		document.getElementById("inputPad3").addEventListener("touchend", onTouchPadEnd3, false);
		document.getElementById("inputPad4").addEventListener("touchend", onTouchPadEnd4, false);
		</script>
	    
	    <br />
	    
  	</div>

    <div id="result"></div>
    <div id="output"></div>

    <script src="youtube.js" type="text/javascript"></script>
  </body>
</html>
â€‹